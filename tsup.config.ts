import { defineConfig } from 'tsup';

export default defineConfig({
	entry: ['src/server.ts'],
	format: ['esm'],
	outDir: 'dist',
	target: 'node18',
	platform: 'node',
	external: [
		'@prisma/client',
		'prisma',
		'bcrypt',
		'jsonwebtoken',
		'@fastify/jwt',
		'@fastify/cors',
		'crypto',
		'fs',
		'path',
		'os',
		'util',
		'stream',
		'events',
		'http',
		'https',
		'url',
		'querystring',
		'zlib',
		'buffer',
		'process',
		'child_process',
		'cluster',
		'dgram',
		'dns',
		'domain',
		'module',
		'net',
		'readline',
		'repl',
		'string_decoder',
		'tls',
		'tty',
		'v8',
		'vm',
		'worker_threads'
	],
	noExternal: [
		'fastify',
		'dotenv'
	],
	clean: true,
	sourcemap: false,
	minify: false,
	splitting: false,
	treeshake: true,
	dts: false
}); 